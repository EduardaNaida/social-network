{"ast":null,"code":"import _objectSpread from\"/Users/eduardanaida/Documents/GitHub/social-network/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/Users/eduardanaida/Documents/GitHub/social-network/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/eduardanaida/Documents/GitHub/social-network/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/eduardanaida/Documents/GitHub/social-network/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/eduardanaida/Documents/GitHub/social-network/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{Profile}from\"./Profile\";import{connect}from\"react-redux\";import{getUserProfile,getUserStatus,savePhoto,saveProfile,updateUserStatus}from\"../../redux/profileReducer\";import{withRouter}from\"react-router-dom\";import withAuthRedirect from\"../../hoc/WithAuthRedirect\";import{compose}from\"redux\";import style from\"./Profile.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";export var ProfileContainer=/*#__PURE__*/function(_React$Component){_inherits(ProfileContainer,_React$Component);var _super=_createSuper(ProfileContainer);function ProfileContainer(){_classCallCheck(this,ProfileContainer);return _super.apply(this,arguments);}_createClass(ProfileContainer,[{key:\"refreshProfile\",value:function refreshProfile(){var userId=this.props.match.params.userId;if(!userId){userId=String(this.props.userId);if(!userId){this.props.history.push('/login');}}this.props.getUserProfile(userId);this.props.getUserStatus(userId);}},{key:\"componentDidMount\",value:function componentDidMount(){this.refreshProfile();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState,snapshot){if(this.props.match.params.userId!=prevProps.match.params.userId){this.refreshProfile();}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{className:style.profileBlock,children:/*#__PURE__*/_jsx(Profile,_objectSpread(_objectSpread({},this.props),{},{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateUserStatus,saveProfile:this.props.saveProfile,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto}))});}}]);return ProfileContainer;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{profile:state.profilePage.profile,status:state.profilePage.status,userId:state.auth.id,isAuth:state.auth.isAuth};};export default compose(connect(mapStateToProps,{getUserProfile:getUserProfile,getUserStatus:getUserStatus,updateUserStatus:updateUserStatus,saveProfile:saveProfile,savePhoto:savePhoto}),withRouter,withAuthRedirect)(ProfileContainer);","map":{"version":3,"sources":["/Users/eduardanaida/Documents/GitHub/social-network/src/components/Profile/ProfileContainer.tsx"],"names":["React","Profile","connect","getUserProfile","getUserStatus","savePhoto","saveProfile","updateUserStatus","withRouter","withAuthRedirect","compose","style","ProfileContainer","userId","props","match","params","String","history","push","refreshProfile","prevProps","prevState","snapshot","profileBlock","profile","status","Component","mapStateToProps","state","profilePage","auth","id","isAuth"],"mappings":"4pBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,OAAR,KAAsB,WAAtB,CACA,OAAQC,OAAR,KAAsB,aAAtB,CAEA,OACEC,cADF,CAEEC,aAFF,CAIEC,SAJF,CAKEC,WALF,CAMEC,gBANF,KAOO,4BAPP,CAQA,OAA6BC,UAA7B,KAA8C,kBAA9C,CACA,MAAOC,CAAAA,gBAAP,KAA6B,4BAA7B,CACA,OAAQC,OAAR,KAAsB,OAAtB,CAEA,MAAOC,CAAAA,KAAP,KAAkB,sBAAlB,C,2CAsBA,UAAaC,CAAAA,gBAAb,mSAEE,yBAAiB,CACf,GAAIC,CAAAA,MAAM,CAAG,KAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBH,MAArC,CACA,GAAI,CAACA,MAAL,CAAa,CACXA,MAAM,CAAGI,MAAM,CAAC,KAAKH,KAAL,CAAWD,MAAZ,CAAf,CACA,GAAI,CAACA,MAAL,CAAa,CACX,KAAKC,KAAL,CAAWI,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB,EACD,CACF,CACD,KAAKL,KAAL,CAAWX,cAAX,CAA0BU,MAA1B,EACA,KAAKC,KAAL,CAAWV,aAAX,CAAyBS,MAAzB,EACD,CAZH,iCAcE,4BAAoB,CAClB,KAAKO,cAAL,GACD,CAhBH,kCAkBE,4BAAmBC,SAAnB,CAA8DC,SAA9D,CAAuFC,QAAvF,CAAuG,CACrG,GAAI,KAAKT,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBH,MAAxB,EAAkCQ,SAAS,CAACN,KAAV,CAAgBC,MAAhB,CAAuBH,MAA7D,CAAqE,CACnE,KAAKO,cAAL,GACD,CACF,CAtBH,sBAwBE,iBAAS,CAEP,mBACE,YAAK,SAAS,CAAET,KAAK,CAACa,YAAtB,uBACE,KAAC,OAAD,gCAAa,KAAKV,KAAlB,MACS,OAAO,CAAE,KAAKA,KAAL,CAAWW,OAD7B,CAES,MAAM,CAAE,KAAKX,KAAL,CAAWY,MAF5B,CAGS,YAAY,CAAE,KAAKZ,KAAL,CAAWP,gBAHlC,CAIS,WAAW,CAAE,KAAKO,KAAL,CAAWR,WAJjC,CAKS,OAAO,CAAE,CAAC,KAAKQ,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBH,MAL3C,CAMS,SAAS,CAAE,KAAKC,KAAL,CAAWT,SAN/B,GADF,EADF,CAYD,CAtCH,8BAAsCL,KAAK,CAAC2B,SAA5C,EA0CA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,KAAD,CAA4C,CAClE,MAAO,CACLJ,OAAO,CAAEI,KAAK,CAACC,WAAN,CAAkBL,OADtB,CAELC,MAAM,CAAEG,KAAK,CAACC,WAAN,CAAkBJ,MAFrB,CAGLb,MAAM,CAAEgB,KAAK,CAACE,IAAN,CAAWC,EAHd,CAILC,MAAM,CAAEJ,KAAK,CAACE,IAAN,CAAWE,MAJd,CAAP,CAMD,CAPD,CAUA,cAAevB,CAAAA,OAAO,CACpBR,OAAO,CAAC0B,eAAD,CAAkB,CAACzB,cAAc,CAAdA,cAAD,CAAiBC,aAAa,CAAbA,aAAjB,CAAgCG,gBAAgB,CAAhBA,gBAAhC,CAAkDD,WAAW,CAAXA,WAAlD,CAA+DD,SAAS,CAATA,SAA/D,CAAlB,CADa,CAEpBG,UAFoB,CAGpBC,gBAHoB,CAAP,CAIbG,gBAJa,CAAf","sourcesContent":["import React from 'react';\nimport {Profile} from \"./Profile\";\nimport {connect} from \"react-redux\";\nimport {AppStateType} from \"../../redux/reduxStore\";\nimport {\n  getUserProfile,\n  getUserStatus,\n  ProfileType,\n  savePhoto,\n  saveProfile,\n  updateUserStatus\n} from \"../../redux/profileReducer\";\nimport {RouteComponentProps, withRouter} from \"react-router-dom\";\nimport withAuthRedirect from \"../../hoc/WithAuthRedirect\";\nimport {compose} from \"redux\";\nimport {ProfileRequestType} from \"../../api/api\";\nimport style from \"./Profile.module.css\"\n\n\ntype ParamsType = {\n  userId: string\n}\ntype MapStatePropsType = {\n  profile: ProfileType | null,\n  status: string,\n  userId: number | null,\n  isAuth: boolean\n}\n\ntype MapDispatchPropsType = {\n  getUserProfile: (userId: string) => void,\n  getUserStatus: (status: string) => void,\n  updateUserStatus: (status: string) => void\n  saveProfile: (profile: ProfileRequestType) => Promise<any>\n  savePhoto: (file: File) => void\n}\nexport type ProfilePagePropsType = RouteComponentProps<ParamsType> & MapStatePropsType & MapDispatchPropsType\n\nexport class ProfileContainer extends React.Component<ProfilePagePropsType> {\n\n  refreshProfile() {\n    let userId = this.props.match.params.userId;\n    if (!userId) {\n      userId = String(this.props.userId);\n      if (!userId) {\n        this.props.history.push('/login')\n      }\n    }\n    this.props.getUserProfile(userId)\n    this.props.getUserStatus(userId)\n  }\n\n  componentDidMount() {\n    this.refreshProfile()\n  }\n\n  componentDidUpdate(prevProps: Readonly<ProfilePagePropsType>, prevState: Readonly<{}>, snapshot?: any) {\n    if (this.props.match.params.userId != prevProps.match.params.userId) {\n      this.refreshProfile()\n    }\n  }\n\n  render() {\n\n    return (\n      <div className={style.profileBlock}>\n        <Profile {...this.props}\n                 profile={this.props.profile}\n                 status={this.props.status}\n                 updateStatus={this.props.updateUserStatus}\n                 saveProfile={this.props.saveProfile}\n                 isOwner={!this.props.match.params.userId}\n                 savePhoto={this.props.savePhoto}\n        />\n      </div>\n    );\n  }\n}\n\n\nconst mapStateToProps = (state: AppStateType): MapStatePropsType => {\n  return {\n    profile: state.profilePage.profile,\n    status: state.profilePage.status,\n    userId: state.auth.id,\n    isAuth: state.auth.isAuth\n  }\n}\n\n\nexport default compose<React.ComponentType>(\n  connect(mapStateToProps, {getUserProfile, getUserStatus, updateUserStatus, saveProfile, savePhoto}),\n  withRouter,\n  withAuthRedirect\n)(ProfileContainer)"]},"metadata":{},"sourceType":"module"}